<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Promise</title>
    <script>
    // const p = new Promise((resolve, reject) => {
    //     resolve(4)
    // })
    function wait(duration) {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(duration)
            }, duration)
        })
    }

    function waitAndFail(duration) {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                reject(duration)
            }, duration)
        })
    }

    // p.then(n => {
    //     console.log('Le nombre', n)
    // })
    //     .then(n => console.log('Le nombre 2', n))
    //     .catch(e => {
    //         console.log('Erreur', e)
    //         return 2
    //     })
    //     .finally(() => console.log('aaa'))

    // wait(2000)
    //     .then(() => {
    //         console.log('Attente 2s')
    //         return wait(1000)
    //     })
    //     .then(() => {
    //         console.log('Attente 1s')
    //     })

    // waitAndFail(2000)
    //     .then(() => {
    //         console.log('Attente 2s')
    //         return waitAndFail(1000)
    //     })
    //     .catch(() => null)

    // async function main() {
    //     try {
    //     await waitAndFail(2000)
    //     console.log('Bonjour')
    //     await wait(1000)
    //     console.log('Hello')
    //     }catch (e) {
    //         console.log('Error')
    //     }
    // }

    function waitSync(duration) {
        const t = Date.now()
        while (Date.now() - t < duration) {

        }
    }

    async function main() {
        const duration = await wait(2000)
        console.log(`Duration: ${duration}`)
        return 5
    }
    // main()
    // Promise.all([wait(1000), wait(2000)])
    //     .then(console.log)
    //     .catch(console.log)
    // Une fonction asynchrone cree une nouvel promise qui etoure votre code
    // function waitAndLog(duration, msg) {
    //     return wait(duration).then(() => console.log(msg))
    // }

    // const p = new Promise((r) => {
    //     console.log('Hello')
    //     r(2)
    // })
    // p.then(() => console.log('then'))
    // waitSync(2000)
    // console.log('Les gens')
    </script>
</head>
<body>

</body>
</html>